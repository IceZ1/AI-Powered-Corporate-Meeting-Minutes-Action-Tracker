name: ğŸŒŸ Auto-Star Thank You

on:
  watch:
    types: [started]

jobs:
  thank-you:
    name: ğŸ™ Thank New Stargazer
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ“‚ Checkout Code
      uses: actions/checkout@v4

    - name: ğŸŒŸ Get Stargazer Info
      id: stargazer
      run: |
        echo "username=${{ github.actor }}" >> $GITHUB_OUTPUT
        echo "star_count=$(curl -s https://api.github.com/repos/${{ github.repository }} | jq .stargazers_count)" >> $GITHUB_OUTPUT

    - name: ğŸ’¬ Create Thank You Issue
      uses: actions/github-script@v7
      with:
        script: |
          const username = '${{ steps.stargazer.outputs.username }}';
          const starCount = '${{ steps.stargazer.outputs.star_count }}';
          
          const issueBody = `
          ## ğŸŒŸ Thank You for Starring CorpMeet-AI!
          
          Hey @${username}! ğŸ‘‹
          
          Thank you so much for starring CorpMeet-AI! â­ You're our **${starCount}${getOrdinalSuffix(starCount)}** star! ğŸ‰
          
          ### ğŸ As a token of our appreciation:
          
          - ğŸ“§ **Early Access**: You'll be among the first to know about new features
          - ğŸ·ï¸ **Special Badge**: You're now a recognized supporter in our community
          - ğŸ’ **Exclusive Updates**: Get insider updates on our development progress
          
          ### ğŸš€ What's Next?
          
          - ğŸ”” **Watch** this repository to get notified of releases
          - ğŸ¤ **Contribute** by checking out our [Good First Issues](https://github.com/Jani-shiv/AI-Powered-Corporate-Meeting-Minutes-Action-Tracker/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22)
          - ğŸ’¬ **Join** our [Discord community](https://discord.gg/corpmeet-ai) for real-time discussions
          - ğŸ“¢ **Share** CorpMeet-AI with your network
          
          ### ğŸ’ Consider Sponsorship
          
          If CorpMeet-AI helps your team save time, consider [sponsoring us](https://github.com/sponsors/Jani-shiv) to help accelerate development!
          
          ---
          
          **Thanks again for your support!** ğŸ™
          
          *The CorpMeet-AI Team* ğŸ’™
          `;
          
          function getOrdinalSuffix(n) {
            const s = ["th", "st", "nd", "rd"];
            const v = n % 100;
            return s[(v - 20) % 10] || s[v] || s[0];
          }
          
          await github.rest.issues.create({
            owner: context.repo.owner,
            repo: context.repo.repo,
            title: `ğŸŒŸ Thank you @${username} for starring CorpMeet-AI!`,
            body: issueBody,
            labels: ['thank-you', 'community']
          });

    - name: ğŸ“Š Update Star Count in README
      if: steps.stargazer.outputs.star_count != ''
      run: |
        # This could update a star count badge or milestone in README
        echo "â­ Star count: ${{ steps.stargazer.outputs.star_count }}"
        
    - name: ğŸ‰ Check for Milestones
      uses: actions/github-script@v7
      with:
        script: |
          const starCount = parseInt('${{ steps.stargazer.outputs.star_count }}');
          const milestones = [10, 25, 50, 100, 250, 500, 1000, 2500, 5000];
          
          if (milestones.includes(starCount)) {
            const celebrationIssue = `
            ## ğŸ‰ MILESTONE ACHIEVED: ${starCount} STARS! ğŸŒŸ
            
            We've just reached **${starCount} stars**! ğŸš€
            
            This is an incredible milestone for CorpMeet-AI and we couldn't have done it without our amazing community! 
            
            ### ğŸ Milestone Celebration
            
            To celebrate this achievement:
            - ğŸŠ Special announcement in our Discord
            - ğŸ“¢ Social media celebration
            - ğŸ† Recognition for all contributors
            - ğŸ¯ Unlock new development goals
            
            ### ğŸš€ What This Means
            
            With ${starCount} stars, we're committed to:
            - ğŸ”¥ Accelerated feature development
            - ğŸ“Š Enhanced AI capabilities  
            - ğŸŒ Expanded platform support
            - ğŸ’¼ Enterprise features
            
            **Thank you to everyone who believed in CorpMeet-AI!** ğŸ’™
            
            ---
            
            ğŸŒŸ **Star us** | ğŸ¤ **Contribute** | ğŸ’ **Sponsor** | ğŸ“¢ **Share**
            `;
            
            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ğŸ‰ MILESTONE: ${starCount} Stars Achieved! ğŸŒŸ`,
              body: celebrationIssue,
              labels: ['milestone', 'celebration', 'announcement']
            });
          }